# This runs under BotBuilder-Js-CI-yaml. Replaces classic build BotBuilder-JS-master-CI-node12.
 steps:
  - task: UsePythonVersion@0
    displayName: Use Python version
    inputs:
      versionSpec: '3.7.x'
  - powershell:
  $allHostRequirementsFiles=get-ChildItem -path Bots/Python/Consumers -include requirements.txt -recursive
  $allSkillRequirementsFiles=get-ChildItem -path Bots/Python/Skills -include requirements.txt -recursive
  python -m pip install --upgrade pip
  foreach($hostBot in $allHostRequirementsFiles)
  {
    pip install -r $hostBot.fullName
  }
  foreach($skillBot in $allSkillRequirementsFiles)
  {
    pip install -r $skillBot.fullName
  }
  - task: CmdLine@2
    displayName: Install dependencies
    inputs:
      script: >
        python -m pip install --upgrade pip
        pip install -r Bots/Python/Consumers/CodeFirst/SimpleGovHostBot/requirements.txt
        pip install -r Bots/Python/Consumers/CodeFirst/SimpleHostBot/requirements.txt
        pip install -r Bots/Python/Skills/CodeFirst/CardSkillBot/requirements.txt
        pip install -r Bots/Python/Skills/CodeFirst/EchoSkillBot/requirements.txt
        pip install -r Bots/Python/Skills/CodeFirst/MultiturnSkillBot/requirements.txt
        pip install -r Bots/Python/Skills/CodeFirst/ProactiveSkillBot/requirements.txt
      failOnStderr: true

